#summary How to write your own Java client.

= Introduction =

This is a brief introduction about using MoniCA classes to access the monitor server from your own Java application. If you wish to access the monitor data from any other language you are probably best off looking at the [ClientASCII ASCII interface], which describes how to access the data using only a TCP socket and some ASCII commands.

=Sample Application=

In the atnf.atoms.mon.apps package is an example application (!TestApp.java) that demonstrates a few ways to communicate with the monitor server. Specifically this program demonstrates:

  * Archive requests - How to access historical data by asking the monitor server to retrieve data from the archive.
  * Real-time data acquisition - An easy way to keep up to date with the latest monitor point values as they become available.

To run this program you should just need to follow these steps:

  # Ensure you have downloaded and compiled MoniCA.
  # Add the atnf.atoms.mon.apps package to your `CLASSPATH`.
  # Identify a MoniCA server, eg `localhost` if you are running one locally.
  # Select a monitor point to use for the demonstration, eg `home.weather.out_temp`.
  # Run the application: `java -Dserver=localhost atnf.atoms.mon.apps.TestApp home.weather.out_temp`

The program will print a bunch of historical information to the screen, each line contains the name of the monitor point, a timestamp and a value. The program will then subscribe to real-time updates and will print values to the screen as they become available.

=Essential Classes=

One of the most fundamental classes from the point of view of a client is `PointData`. This contains the timestamp and value for each monitor point update, as well as the name of the monitor point that the data belongs to. `PointData` objects are used to store data in both real-time and archival requests.

An important class for clients who wish to obtain real-time updates is `DataMaintainer`. This class figures out the right time to query the server for the latest values for each monitor point of interest and delivers the updates values to your own classes. In order to receive the updated values you need to implement the interface `PointListener`. The `onPointEvent(..)` method will be called each time a new value is available for any of the monitor points of interest. To specify which monitor points you wish to listen to, simply put all of the monitor point names into a `Vector` and call the `DataMaintainer.subscribe(..)` method.

The client side class that provides access to the full functionality of the monitor server is called `MonitorClientCustom`. You could create your own instance of this class but you can also obtain an instance by calling `MonClientUtil.getServer()`. The `MonitorClientCustom` interface is fully defined in the javadocs.